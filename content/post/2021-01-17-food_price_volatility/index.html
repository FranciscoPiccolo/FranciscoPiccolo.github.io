---
title: "Volatilidade no Preços dos Alimentos - Jundiaí"
date: 2020-12-30
math: true
---

<link href="index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="index_files/anchor-sections/anchor-sections.js"></script>


<pre class="r"><code>library(GGally)
library(fpp3)
library(fable)
library(tsibble)
library(tsibbledata)
library(feasts)
library(tidyverse)
library(patchwork)
library(seasonal)
library(fma)

# Função para padronizar o design dos gráficos
theme_graph &lt;- function(){
  theme(
    plot.title = element_text(size = 16),
    plot.subtitle = element_text(size = 12),
    plot.caption = element_text(face = &quot;italic&quot;, size = 9),
    axis.text = element_text(size = 9),
    axis.title = element_text(face = &quot;italic&quot;, size = 9),
    strip.background = element_rect(fill = &quot;grey&quot;),
    strip.text = element_text(face = &quot;bold&quot;),
    legend.position = &quot;bottom&quot;,
    legend.title = element_blank()
  )
}</code></pre>
<pre class="r"><code>dataset &lt;- readr::read_csv(file = &quot;https://raw.githubusercontent.com/FranciscoPiccolo/franciscopiccolo.github.io/master/datasets/2020-06-20-grocery_price_volatility/dataset_1.csv&quot;)</code></pre>
<pre class="r"><code>dataset %&gt;%
  group_by(product) %&gt;% 
  summarise(rows = n()) %&gt;% 
  filter(rows &lt;= 3) %&gt;% 
  select(product) -&gt; low_sample_product</code></pre>
<pre class="r"><code>dataset &lt;- 
  dataset %&gt;% 
  mutate(price_per_vol = price/volume_gm_ml) %&gt;% 
  filter(!product %in% c(low_sample_product$product))</code></pre>
<div id="section" class="section level2">
<h2>****</h2>
<pre class="r"><code>dataset$price &lt;- as.numeric(dataset$price)

dataset %&gt;% 
  group_by(product) %&gt;% 
  summarise(rows = n()) %&gt;% 
  mutate(product = fct_reorder(product, rows, .desc = T),
         product = fct_lump(product, 10)) %&gt;% 
  ggplot2::ggplot()+
  geom_col(mapping = aes(x = product, y = rows))+
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>dataset %&gt;%
  ggplot2::ggplot()+
  geom_line(mapping = aes(x = data, y = price_per_vol, group = local, color = local))+
  scale_color_brewer(type = &quot;qual&quot;, palette = 2)+
  theme_graph()+
  facet_wrap(~product, scales = &quot;free_y&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>dataset %&gt;% 
  ggplot2::ggplot()+
  geom_boxplot(mapping = aes(x = local, y = price_per_vol))+
  facet_wrap(~product, scales = &quot;free_x&quot;)+
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>

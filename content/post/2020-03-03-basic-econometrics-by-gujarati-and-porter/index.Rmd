---
title: "Econometria Básica de Gujarati e Porter: Resolvendo Exercícios Propostos"
date: 2020-03-01
math: true
---

Econometria é uma ferramenta (ou técnica) muito usada por economistas, estatísticos e também por outras ciências. Uma definição encontrada nos livros básicos é:

> "Econometria é a aplicação de modelos estatísticos em dados econômicos"

Com base nesta definição, é importante entender a definição de modelos estatísticos e dados econômicos. Em modelos estatísticos, podemos interpretar como equações matemáticas que buscam traduzir um fenômeno estudado, sendo aplicado à coleta, análise e interpretação de dados ou frequência de eventos visando modelar a aleatoriedade e a incerteza. Por outro lado, dados econômicos não possuem uma definição tão clara, porém sabendo que a ciência econômica atua no estudo da alocação dos recursos da sociedade, é possível inferir quando os dados são econômicos.

Estou apresentando estas definições por conta de que neste post irei focar em um livro de Econometria Básica muito usado nos cursos de Economia. O livro foi escrito por **Damodar N. Gujarati** e **Dawn C. Porter** e contêm muitos exercícios usando dados econômicos que achei bastante interessante. Pelo fato de o livro não mostrar as soluções dos problemas, achei válido fazer um post com as soluções de alguns dos exercícios.

![](./library_images/basic_econometrics_gujarati.png)

Os dados usados nos exercícios estarão em meu repositório do [Github](https://github.com/FranciscoPiccolo/franciscopiccolo.github.io/tree/master/datasets/2020-03-01-basic_econometrics_by_gujarati), em formato ".txt". Para acessar um dataset, basta usar o seguinte comando:

```{r, warning=F, message=F}
# Primeiro chame o pacote 'readr' que contém a função 'read_csv'
library(readr)

# Exemplo com o dataset 'table_1.3'
table_1.3_cpi <- readr::read_delim(file = "https://raw.githubusercontent.com/FranciscoPiccolo/franciscopiccolo.github.io/master/datasets/2020-03-01-basic_econometrics_by_gujarati/table_1.3_cpi.txt",
                                   delim = " ")
```

Porém, ao invés de sempre usar este caminho extenso para trazer o dataset, eu posso criar uma variável contendo este caminho e mudar apenas a última parte, em que indico o nome do dataset (i.e. "table_1.3_ipc.txt").

```{r, warning=F, message=F}
dataset_path <- "https://raw.githubusercontent.com/FranciscoPiccolo/franciscopiccolo.github.io/master/datasets/2020-03-01-basic_econometrics_by_gujarati/"
```

Com isso, para chamar um dataset, basta usar um comando mais curto, com a função "paste".

```{r, warning=F, message=F}
table_1.3_cpi <- 
  readr::read_delim(file = paste(dataset_path,
                               "table_1.3_cpi.txt", 
                               sep = ""),
                  delim = " ")
```

Agora vamos ao que interessa. Para desenvolver os exercícios, vou usar os pacotes abaixo e também uma função para padronizar o design dos gráficos.

```{r, warning=F, message=F}
library(tidyverse)
library(patchwork)
library(gt)
library(modelsummary)

# Função para padronizar o design dos gráficos
theme_graph <- function(){
  theme(
    plot.title = element_text(size = 16),
    plot.subtitle = element_text(size = 12),
    plot.caption = element_text(face = "italic", size = 9),
    axis.text = element_text(size = 9),
    axis.title = element_text(face = "italic", size = 9),
    strip.background = element_rect(fill = "grey"),
    strip.text = element_text(face = "bold"),
    legend.position = "bottom",
    legend.title = element_blank()
  )
}
```

## **Capítulo 1**

### **1.1. A Tabela 1.3 apresenta dados relativos ao Índice de Preços ao Consumidor (IPC) de sete países industrializados. A base do índice é 1982–1984 = 100.**

**a. Com base nos dados fornecidos, calcule a taxa de inflação de cada país.**

Para resolver este exercício, vamos trazer o dataset necessário.

```{r, message=F, warning=F}
table_1.3_cpi <- 
  readr::read_delim(file = paste(dataset_path,
                               "table_1.3_cpi.txt", 
                               sep = ""),
                  delim = " ") %>% 
  mutate(year = as.character(year))
```

Vamos também ver uma amostra destes dados:

```{r, warning=F, message=F}
table_1.3_cpi %>% 
  head(5) %>% 
  knitr::kable(format.args = list(big.mark = ".", decimal.mark = "."))
```

A inflação para cada país será a variação de um período com base no período anterior. Para realizar este cálculo, basta usar o 'mutate' e a função 'lag'.

```{r, error=F, message=F, warning=F}
# Usando o pacote gt (Grammar of Tables) para esse exercício
table_1.3_cpi %>% 
  mutate(usa_cpi = usa/lag(usa,1)-1,
         canada_cpi = canada/lag(canada,1)-1,
         japan_cpi = japan/lag(japan,1)-1,
         france_cpi = france/lag(france,1)-1,
         germany_cpi = germany/lag(germany,1)-1,
         italy_cpi = italy/lag(italy,1)-1,
         uk_cpi = uk/lag(uk,1)-1) %>% 
  select(year, usa_cpi, canada_cpi, japan_cpi, france_cpi, germany_cpi, italy_cpi, uk_cpi) %>% 
  tidyr::gather("country","values", 2:8) %>% 
  filter(!is.na(values)) -> country_cpi

country_cpi %>% 
  tidyr::spread("country","values") %>% 
  gt::gt() %>% 
  gt::tab_header(title = md("**Inflação (CPI) para os Países Selecionados**"),
                 subtitle = "De 1981 Até 2005") %>% 
  gt::tab_source_note(source_note = "Fonte: FMI") %>% 
  gt::tab_footnote(footnote = "Index = 100",
                   locations = cells_body(columns = vars(year),
                                          rows = 4)) %>% 
  fmt_percent(columns = 2:8)
```

**b. Represente graficamente a taxa de inflação de cada país em relação ao tempo (isto é, use o eixo horizontal para o tempo e o eixo vertical para a taxa de inflação).**

```{r, message=F, warning=F, error=F}
country_cpi %>% 
  ggplot2::ggplot()+
  geom_line(mapping = aes(x = year, 
                          y = values, 
                          group = country, 
                          color = country))+
  scale_y_continuous(labels = scales::percent)+
  scale_x_discrete(breaks = c("1985","1995","2005"))+
  scale_color_brewer(type = "qual", palette = 2)+
  theme_graph()+
  labs(title = "Inflação dos Países Selecionados",
       y = "CPI (Consumer Price Index)")
```

**c. Que conclusões gerais é possível tirar sobre a evolução da inflação nos sete países?**

Há uma tendência de queda nos países selecionados após 1985, onde todos mantiveram uma taxa abaio de 5% ao ano.

**d. Em que país a taxa de inflação parece ser a mais flutuante? Há alguma explicação para isso?**

A tabela abaixo mostra um resumo da inflação de cada país, já transformada em percentual.

```{r, message=F, warning=F, error=F}
country_cpi %>% 
  mutate(values = values*100) %>% 
  tidyr::spread("country","values") %>% 
  modelsummary::datasummary_skim()
```

O desvio padrão (SD) mais elevado é o da Itália, talvez por ter um *outlier* no valor máximo (de 18.2%). O gráfico abaixo irá dar destaque para este país para vermos se é evidente que sua flutuação é maior que a dos outros.

```{r, message=F, warning=F, error=F}
country_cpi %>% 
  mutate(is_floating = as.character(case_when(country == "italy_cpi" ~ "Italy CPI",
                                              TRUE ~ "Others"))) %>% 
  ggplot2::ggplot()+
  geom_line(mapping = aes(x = year, 
                          y = values, 
                          group = country, 
                          color = is_floating),
            size = 1)+
  scale_y_continuous(labels = scales::percent)+
  scale_x_discrete(breaks = c("1985","1995","2005"))+
  scale_color_manual(values = c("Italy CPI" = "dark orange",
                                "Others" = "steel blue"),
                     name = "Inflação da Inglaterra = 1")+
  theme_graph()+
  labs(title = "Análise da Inflação na Itália",
       subtitle = "Aparentemente é a taxa mais flutuante",
       y = "CPI (Consumer Price Index)")
```

A flutuação parece maior na Itália por conta dos primeiros anos, onde a inflação ficou bastante alta. Caso a análise seja feita a partir de 1985, a Inglaterra fica com maior desvio padrão.

--------------------------------------------------------------------

### **1.2**

**a. Usando a Tabela 1.3, represente as taxas de inflação do Canadá, França, Alemanha, Itália, Japão e Reino Unido em relação à taxa de inflação dos Estados Unidos.**

Com o pacote **GGally** é possível criar estes comparativos mais facilmente.

```{r, warning=F, message=F}
country_cpi %>% 
  tidyr::spread("country", "values") %>% 
  GGally::ggpairs(columns = 2:8)+
  theme_graph()+
  theme(axis.text = element_blank())+
  labs(title = "Correlação Entre as Taxas de Inflação")
```

Apenas a linha e coluna 'usa_cpi' precisa ser usada, mostrando o gráficos de dispersão entre as variáveis e seu coeficiente de correlação. A menor correlação é a da Alemanha, que ficou em 69,3%.

**b. Faça um comentário geral sobre o comportamento das taxas de inflação dos seis países em relação à inflação dos Estados Unidos.**

```{r, message=F, warning=F}
country_cpi %>% 
  tidyr::spread("country", "values") %>% 
  select(-year) %>% 
  cor() %>% 
  head(7)
```

Os países selecionados possuem economias já desenvolvidas e bastante conectadas entre si, por isso há este comportamento parecido nas taxas de inflação. A correlação é alta não apenas entre os EUA e os outros países, por conta desta conexão entre as economias.

**c. Se você constatar que as taxas de inflação dos seis países evoluem no mesmo sentido que a dos Estados Unidos, isso sugere que a inflação dos Estados Unidos "causa" inflação nos outros países? Justifique.**

Com estes dados não é possível verificar se há uma correlação [espúria](https://pt.wikipedia.org/wiki/Rela%C3%A7%C3%A3o_esp%C3%BAria) entre as variáveis, portanto não consigo afirmar se a variação na inflação dos EUA causa variação na inflação dos outros países.

--------------------------------------------------------------------

### **1.3 A Tabela 1.4 apresenta as taxas de câmbio em sete países industrializados, no período 1985 - 2006. Exceto no caso do Reino Unido, as taxas de câmbio estão definidas como unidades de moeda estrangeira por um dólar; no caso do Reino Unido, a taxa de câmbio é dada como o número de dólares por uma libra esterlina.**

**a. Represente graficamente a evolução das taxas de câmbio ao longo do tempo e comente sobre o comportamento geral dessa evolução.**


**b. Diz-se que o dólar apreciou-se quando pode comprar mais unidades de moeda estrangeira. Opostamente, diz-se que se depreciou quando compra menos unidades da moeda estrangeira. No período 1985–2006, qual foi o comportamento geral do dólar dos Estados Unidos? Aproveite para pesquisar em algum livro de macroeconomia ou de economia internacional os fatores que determinam a apreciação ou depreciação de uma moeda.**

--------------------------------------------------------------------

### **1.4 A Tabela 1.5 apresenta os dados relativos à oferta monetária, no conceito de M1, que aparecem na Figura 1.5. Você poderia apresentar razões para o aumento da oferta de moeda no período considerado?**

--------------------------------------------------------------------

### **1.7 Os dados apresentados na Tabela 1.6 foram divulgados na edição do The Wall Street Journal de 1º de março de 1984. Relacionam o orçamento de publicidade (em milhões de dólares) de 21 empresas em 1983 com as impressões retidas, semanalmente, pelos que viram os produtos anunciados por essas empresas. Os dados foram obtidos em uma pesquisa realizada com 4 mil adultos, em que foi pedido aos usuários dos produtos que citassem um comercial da categoria do produto que tivessem assistido na semana anterior.**

**a. Trace um gráfico com as impressões no eixo vertical e os gastos com publicidade no eixo horizontal.**

**b. O que você poderia dizer sobre a natureza da relação entre as duas variáveis?**

**c. Examinando o gráfico, você acha que vale a pena anunciar? Pense em todos os comerciais veiculados em finais de campeonatos de esportes ou no horário nobre.**

--------------------------------------------------------------------

## **Capítulo 2**


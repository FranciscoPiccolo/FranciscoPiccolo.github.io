<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Francisco Piccolo ">
<meta name="description" content="Imigration is a central theme on political debates for presidential elections nowadays, creating a lot of controversies and also hope for many people. This social event is increasingly calling more attention, both Syria conflict and the weaknesses of the Venezuelan economy that sent millions to seek other place to live surpreended politicians, that didn’t get ready earlier to obtain the benefits that migration flow could generate.
Because of the theme’s relevance, in November-2019 The Economist made a special report about immigration, aiming to clarify the current situation, answer some questions about the impact of immigrants on host countries and also present some success cases of countries that are obtaining advantages by the immigration flow." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="/posts/2020/01/global-immigration-outlook-using-wbstats-r-package/" />


    <title>
        
            Global Immigration Outlook using wbstats R package :: Glass Frog  — Hello Friend NG Theme
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.753fac8f03736f0edc9be411eb20cee875dd7bb8e73c8155fbf6a629c863f4ca.css">




    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">



<meta itemprop="name" content="Global Immigration Outlook using wbstats R package">
<meta itemprop="description" content="Imigration is a central theme on political debates for presidential elections nowadays, creating a lot of controversies and also hope for many people. This social event is increasingly calling more attention, both Syria conflict and the weaknesses of the Venezuelan economy that sent millions to seek other place to live surpreended politicians, that didn’t get ready earlier to obtain the benefits that migration flow could generate.
Because of the theme’s relevance, in November-2019 The Economist made a special report about immigration, aiming to clarify the current situation, answer some questions about the impact of immigrants on host countries and also present some success cases of countries that are obtaining advantages by the immigration flow.">
<meta itemprop="datePublished" content="2020-01-20T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-01-20T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2536">
<meta itemprop="image" content="/"/>



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/"/>

<meta name="twitter:title" content="Global Immigration Outlook using wbstats R package"/>
<meta name="twitter:description" content="Imigration is a central theme on political debates for presidential elections nowadays, creating a lot of controversies and also hope for many people. This social event is increasingly calling more attention, both Syria conflict and the weaknesses of the Venezuelan economy that sent millions to seek other place to live surpreended politicians, that didn’t get ready earlier to obtain the benefits that migration flow could generate.
Because of the theme’s relevance, in November-2019 The Economist made a special report about immigration, aiming to clarify the current situation, answer some questions about the impact of immigrants on host countries and also present some success cases of countries that are obtaining advantages by the immigration flow."/>







    <meta property="article:published_time" content="2020-01-20 00:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Home</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/books/">Book Review</a></li><li><a href="/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>12 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="/posts/2020/01/global-immigration-outlook-using-wbstats-r-package/">Global Immigration Outlook using wbstats R package</a>
            </h1>

            

            <div class="post-content">
                


<p>Imigration is a central theme on political debates for presidential elections nowadays, creating a lot of controversies and also hope for many people. This social event is increasingly calling more attention, both Syria conflict and the weaknesses of the Venezuelan economy that sent millions to seek other place to live surpreended politicians, that didn’t get ready earlier to obtain the benefits that migration flow could generate.</p>
<p>Because of the theme’s relevance, in November-2019 <a href="https://www.economist.com/printedition/2019-11-16">The Economist</a> made a special report about immigration, aiming to clarify the current situation, answer some questions about the impact of immigrants on host countries and also present some success cases of countries that are obtaining advantages by the immigration flow.</p>
<p>I’ve really enjoyed the theme and the researches that were writen by The Economist’s correspondents, thus I decided to write a post to present the main conclusions of the studies and also complement them with additional data about immigration around the world. For this task I’ll access World Bank’s database using the R package wbstats, an API that allows you to connect to the institution’s database.</p>
<p>The following image is from one of the magazine’s reports.</p>
<p><img src="/images/2020-01-09_imigration_post.png" /></p>
<div id="main-conclusions-of-the-report" class="section level2">
<h2><strong>Main conclusions of the report</strong></h2>
<ol style="list-style-type: decimal">
<li><p>People that successfully migrate from a poor country to a rich one increase their income between 3 to 6 times, because rich countries have better institutions, capital alocation and modern companies.</p></li>
<li><p>If everone that wanted immigration were allowed to, World’s GDP could increase in 100%.</p></li>
<li><p>Immigrants are more likely to open their own business because they percept unatended demands easier than local residents and also they find alternative solutions to existent problems on the country that they enter.</p></li>
<li><p>The main “problem” with immigration is the cultural change, that occurs speedly in specific places because immigrants tend to cluster in certain locals. In addition of being the main problem, it’s a tough condition to measure, then it’s difficult to be contested.</p></li>
<li><p>People are more tolerant to immigration flow in their countries when they feel that their government are in charge of the frontier, allowing people qualified that will add to local society. In other words, people are more receptive if they feel that the process is under control.</p></li>
<li><p>Imigratns often share their income with their families that have stayed on the country and this shared income is called <a href="https://www.ted.com/talks/dilip_ratha_the_hidden_force_in_global_economics_sending_money_home">remitances</a>. Remitances already is the main source of external investment in certain poor countries. This flow of money has high potential of impacts, because it goes straight to the pocket of people that are in need and also this investment doesn’t carry the risk of being misplaced by corruption. Remitances represent more than 10% of GDP for 28 countries.</p></li>
</ol>
</div>
<div id="immigration-outlook" class="section level2">
<h2><strong>Immigration Outlook</strong></h2>
<p>After understanding some aspects of immigration, we can analyze some data from World Bank in order to dive a little deep on this theme. For this task I’ll use the following packages:</p>
<pre class="r"><code>library(tidyverse)      # data science and data manipulation packages
library(wbstats)        # World Bank API

theme_graph &lt;- function(){
  theme(
    plot.title = element_text(size = 16),
    plot.subtitle = element_text(size = 12),
    plot.caption = element_text(face = &quot;italic&quot;, size = 9),
    axis.text = element_text(size = 9),
    axis.title = element_text(face = &quot;italic&quot;, size = 9),
    strip.background = element_rect(fill = &quot;grey&quot;),
    strip.text = element_text(face = &quot;bold&quot;),
    legend.title = element_blank(),
    legend.position = &quot;bottom&quot;
  )
}</code></pre>
<p>The first thing the I would like to know about this theme is the population considered immigrant by the institution, as well as the evolution of this metric during the years. In order to access this data, we just need to call the wbstats package with the code that represent the desired metric.</p>
<pre class="r"><code># Creating a variable with the data.frame of the requested data
migrants_pop &lt;- wbstats::wb(indicator = &quot;SM.POP.TOTL&quot;,
                              country = &quot;countries_only&quot;,
                              startdate = 1980,
                              enddate = 2019)</code></pre>
<p>After requesting the data, it’s possible to analyze the immigration population during the years.</p>
<pre class="r"><code>migrants_pop %&gt;% 
  group_by(date) %&gt;% 
  summarise(immigrants = sum(value)) %&gt;% 
  ggplot()+
  geom_line(mapping = aes(x = date, y = immigrants, group = 1), 
            size = .5, 
            color = &quot;dark orange&quot;,
            alpha = .6)+
  geom_point(mapping = aes(x = date, y = immigrants),
             color = &quot;dark orange&quot;)+
  scale_y_continuous(labels = scales::comma)+
  theme_graph()+
  labs(title = &quot;Immigrant&#39;s population during the years&quot;,
       x = &quot;&quot;,
       y = &quot;&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The dataset goes untill 2015 with a population of 250 millions. That’s more than Brazil’s population. Moving forward, let’s see which countries have the highest share of immigrants living on their territory. The next visualization will present the 20 countries with the highest rate of immigrants on their population. Probably Canada and Australia will be well positioned.</p>
<p>For this visualization, we’ll need bring data about country population in order to join with the immigrant population. This metric will consider the share in 2015 only.</p>
<pre class="r"><code># Bringing population data from world bank
population &lt;- wbstats::wb(indicator = &quot;SP.POP.TOTL&quot;,
                          country = &quot;countries_only&quot;)</code></pre>
<pre class="r"><code># Joining both datasets
migrants_pop %&gt;% 
  filter(date == &quot;2015&quot;) %&gt;% 
  select(country, date, value) %&gt;% 
  inner_join(population, by = c(&quot;country&quot; = &quot;country&quot;, &quot;date&quot; = &quot;date&quot;)) %&gt;%
  mutate(share_immigrants = round(value.x/value.y, digits = 4)) %&gt;% 
  filter(value.y &gt;= 10000000) %&gt;% 
  arrange(desc(share_immigrants)) %&gt;% 
  head(20) %&gt;% 
  mutate(country = fct_reorder(country, share_immigrants)) %&gt;% 
  ggplot()+
  geom_col(mapping = aes(x = country, y = share_immigrants),
           fill = &quot;dark orange&quot;,
           alpha = .6)+
  scale_y_continuous(labels = scales::percent)+
  theme_graph()+
  labs(title = &quot;County rank by imigration share over population&quot;,
       x = &quot;&quot;,
       y = &quot;% of imigrants over the population&quot;)+
  coord_flip()</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>I didn’t know Saudi Arabia would be the first. This <a href="https://www.thestreet.com/personal-finance/countries-with-most-immigrants">article</a> enforce this number. As I removed countries with less than 10 million hbitants, I’ve probably removed UAE that was the first positioned in the mentioned article.</p>
<p>Now that we know the countries that have been receiving many immigrants, let’s see some countries that have been loosing residents during the past years. The World Bank has an indicator that shows the net output of people for a given country. The math is straightforward, it’s immigrants minus migrants. Thus, if I classify countries from the lowest value to the highest and select the first 20, I’ll end up with the 20 countries that have lost more local residents.</p>
<p>For this analysis I’ll take the mentioned metric from 2010 to 2017, in order to consider the outflow of residents throughout some years. First, let’s take the Net Immigration Flow metric.</p>
<pre class="r"><code>net_immigration &lt;- wbstats::wb(indicator = &quot;SM.POP.NETM&quot;,
                         country = &quot;countries_only&quot;,
                         startdate = 2010,
                         enddate = 2019) %&gt;% 
  select(country, value, date)

# Dataset sample
net_immigration[sample(nrow(net_immigration),5), ]</code></pre>
<pre><code>##                       country   value date
## 1113                St. Lucia       0 2017
## 293                    Bhutan    1600 2017
## 908                   Ireland -111819 2012
## 2113                    Samoa  -14013 2017
## 313  Central African Republic -200000 2017</code></pre>
<p>Now we can adjust the dataset to sum the years gathered and classify the countries in order to take the 20 that have lost more residents during the period and plot the graph.</p>
<pre class="r"><code>net_immigration %&gt;% 
  group_by(country) %&gt;% 
  summarise(net_immigration = sum(value)) %&gt;% 
  arrange(net_immigration) %&gt;% 
  head(20) %&gt;% 
  mutate(net_immigration = net_immigration * -1,
         country = fct_reorder(country, net_immigration)) %&gt;% 
  ggplot()+
  geom_col(mapping = aes(x = country, y = net_immigration),
           fill = &quot;dark orange&quot;,
           alpha = .6)+
  scale_y_continuous(labels = scales::comma)+
  theme_graph()+
  coord_flip()+
  labs(title = &quot;Countries that had lost more residents since 2010&quot;,
       x = &quot;&quot;,
       y = &quot;Net immigration&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>I was expecting to see Syria and Venezuela in this plot. India and China isn’t in the same scenario of those two countries, but with their large population, any movement in theses countries are a big thing when we don’t normalize the data. In order to remove these big countries, let’s remake this analysis but now classifing countries considering the share of the population that migrated from it. For this, we’ll need to bring the same Net Immigration Flow metric and join with poplational data in the last year of analysis.</p>
<pre class="r"><code># Net immigration summed during the period
net_immigration %&gt;% 
  group_by(country) %&gt;% 
  summarise(net_immigration = sum(value)) -&gt; net_immigration

# Joinning the population and net_immigration data
population %&gt;% 
  filter(date == 2015) %&gt;%
  mutate(population = value) %&gt;% 
  select(country, population) %&gt;% 
  inner_join(net_immigration, by = c(&quot;country&quot; = &quot;country&quot;)) %&gt;% 
  mutate(net_immigration_share = round(net_immigration/population, digits = 4)) %&gt;% 
  arrange(net_immigration_share) %&gt;% 
  head(20) %&gt;% 
  mutate(net_immigration_share = net_immigration_share * -1,
         country = fct_reorder(country, net_immigration_share)) %&gt;% 
  ggplot()+
  geom_col(mapping = aes(x = country, y = net_immigration_share),
           fill = &quot;dark orange&quot;,
           alpha = .6)+
  scale_y_continuous(labels = scales::percent)+
  theme_graph()+
  coord_flip()+
  labs(title = &quot;Share of population that left the country in the period&quot;,
       x = &quot;&quot;,
       y = &quot;&quot;,
       caption = &quot;From 2010 to 2017&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>This analysis seems pretty realistic, having Syria in the first place and Puerto Rico with its social problems with gangs and organized crime.</p>
<p>Moving forward, know that we know what countries are loosing their residents, let’s analyze how remitances are impacting these countries. As noted at The Economist’s reports, remitance is a great source of investment for poor countries, because it goes straight to the hands of the family that are in need of it and is less likely to be drained by corruption.</p>
<p>Two findings in the research made by the magazine called my attention. The first is that remitance represents more thant 10% of GDP in 29 countries (that’s a huge contribution). The second discovery is that remitance is acyclic with Per Capita GDP. Thus it moves in opposite direction of this indicator and this behavior has a theory to justify it.</p>
<p>When immigrants realize that their home country are in trouble, like an economic crises or a war, they sent more money to their families in order to support them in a new tough situation. This seems well justified, but we can verify this hypothesis (i.e. if remitance is acyclic when compared with Per Capita GDP). Fortunately, Word Bank has the necessary data to analyze this hypothesis.</p>
<p>Let’s first visualize the countries that have more than 10% of their GDP comming from remitances. Luckly, World Bank has this specific metric ready to be requested by the API. The following list represent the countries and their share of GDP comming from remitances.</p>
<pre class="r"><code>remitances_over_gdp &lt;- wbstats::wb(indicator = &quot;BX.TRF.PWKR.DT.GD.ZS&quot;,
                         country = &quot;countries_only&quot;)

remitances_over_gdp %&gt;% 
  filter(date == &quot;2018&quot;,
         country != &quot;Lesotho&quot;,
         value &gt; 10) %&gt;%
  mutate(remitance_over_gdp = paste(round(value,digits = 0),&quot;%&quot;,sep = &quot;&quot;)) %&gt;% 
  arrange(desc(value)) %&gt;% 
  select(date, country, remitance_over_gdp)</code></pre>
<pre><code>##    date                country remitance_over_gdp
## 1  2018                  Tonga                41%
## 2  2018        Kyrgyz Republic                33%
## 3  2018                  Haiti                33%
## 4  2018             Tajikistan                29%
## 5  2018                  Nepal                29%
## 6  2018            El Salvador                21%
## 7  2018               Honduras                20%
## 8  2018                  Samoa                18%
## 9  2018     West Bank and Gaza                17%
## 10 2018                Moldova                16%
## 11 2018                Jamaica                16%
## 12 2018                 Kosovo                16%
## 13 2018             Uzbekistan                15%
## 14 2018       Marshall Islands                14%
## 15 2018                Liberia                14%
## 16 2018                Comoros                14%
## 17 2018            Gambia, The                12%
## 18 2018            Yemen, Rep.                12%
## 19 2018                Lebanon                12%
## 20 2018              Guatemala                12%
## 21 2018                Armenia                12%
## 22 2018             Cabo Verde                12%
## 23 2018                Georgia                12%
## 24 2018              Nicaragua                11%
## 25 2018                Ukraine                11%
## 26 2018             Montenegro                11%
## 27 2018                 Jordan                11%
## 28 2018 Bosnia and Herzegovina                11%
## 29 2018            Philippines                10%
## 30 2018       Egypt, Arab Rep.                10%
## 31 2018                Senegal                10%</code></pre>
<p>Now, let’s analyze the hypothesis that the remitance is acyclic when compared with Per Capita GDP. For this test, I’ll select the following countries: Suriname, Somalia, Sierra Leone, Senegal, Sudan, Rwanda, Nepal, Niger, Malawy, Mali, Lybia, Kenya, Ethiopia, Eritrea and Congo.</p>
<p>Now I’ll request the metric “Remitances received” and “Per Capita GDP”.</p>
<p>Know I have remitances received and Per Capita GDP. In order to compare, it’ll be necessary to normalize remitances by country population. The following code chunk will do this task.</p>
<pre class="r"><code>remitances_received %&gt;% 
  mutate(remitances = value) %&gt;% 
  select(date, country, remitances) %&gt;% 
  filter(country %in% country_view,
         date &gt; 2010) %&gt;% 
  inner_join(population, by = c(&quot;date&quot; = &quot;date&quot;, &quot;country&quot; = &quot;country&quot;)) %&gt;% 
  select(date, country, remitances, value) %&gt;% 
  mutate(remitances_adj = round(remitances/value, digits = 4)) %&gt;% 
  select(date, country, remitances_adj) -&gt; remitances

# Sample from dataset
remitances[sample(nrow(remitances),5), ]</code></pre>
<pre><code>##     date              country remitances_adj
## 46  2011              Nigeria       126.6354
## 58  2015               Rwanda        14.0029
## 1   2016          Congo, Rep.         1.5468
## 103 2018             Tanzania         7.3317
## 93  2012 Syrian Arab Republic        79.3708</code></pre>
<p>Know, I can join the two datasets and generate the scaterplot. The remitances dataset created before is already filtered with the selected countries.</p>
<pre class="r"><code>gdp_pc %&gt;% 
  mutate(gdp_pc = value) %&gt;% 
  select(date, country, gdp_pc) %&gt;% 
  inner_join(remitances, by = c(&quot;date&quot; = &quot;date&quot;, &quot;country&quot; = &quot;country&quot;)) %&gt;% 
  ggplot()+
  geom_point(mapping = aes(x = remitances_adj, y = gdp_pc))+
  geom_smooth(mapping = aes(x = remitances_adj, y = gdp_pc),
              method = &quot;lm&quot;,
              formula = y ~ x,
              se = F,
              lty = 2,
              color = &quot;dark orange&quot;)+
  theme_graph()+
  labs(title = &quot;Per Capita GDP and Remitances correlation&quot;,
       y = &quot;Per Capita GDP&quot;,
       x = &quot;Per Capita Remitances&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>I was expecting to see a negative correlation between the variables, because the lower Per Capita GDP, highet should be Per Capita Remitances. Let’s see the regression model for this two variables. The model that I’ll use will be:</p>
<p><span class="math display">\[R = \beta_0 + \beta_1 pc.gdp + \mu\]</span>
In other words, I’ll analyze the impact that per capita GDP causes in the flow of per capita remitances sent by immigrants to their families or friends. Unfortunately <span class="math inline">\(\beta_2\)</span> will be positive (contraty to what I was expecting), but eventhouth I’ll keep the model development.</p>
<pre class="r"><code>gdp_pc %&gt;% 
  mutate(gdp_pc = value) %&gt;% 
  select(date, country, gdp_pc) %&gt;% 
  inner_join(remitances, by = c(&quot;date&quot; = &quot;date&quot;, &quot;country&quot; = &quot;country&quot;)) %&gt;%
  lm(formula = remitances_adj ~ gdp_pc) %&gt;% 
  summary()</code></pre>
<pre><code>## 
## Call:
## lm(formula = remitances_adj ~ gdp_pc, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -109.41  -33.61  -25.80   35.76  240.26 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 23.911203  10.341743   2.312   0.0225 *  
## gdp_pc       0.030089   0.006127   4.911    3e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 66.44 on 116 degrees of freedom
## Multiple R-squared:  0.1721, Adjusted R-squared:  0.165 
## F-statistic: 24.11 on 1 and 116 DF,  p-value: 3.002e-06</code></pre>
<p>With the output of the model we can reformulate the regression equation:</p>
<p><span class="math display">\[R = 23.91 + 0.03 pc.gdp + \mu\]</span></p>
<p>Both intercept and slope are statistically significant with a p-value lower than 5%. Let’s summarize the both metric and see a time series of them in order to identify the mentioned pattern.</p>
<pre class="r"><code>gdp_pc %&gt;% 
  mutate(gdp_pc = value) %&gt;% 
  select(date, country, gdp_pc) %&gt;% 
  inner_join(remitances, by = c(&quot;date&quot; = &quot;date&quot;, &quot;country&quot; = &quot;country&quot;)) %&gt;%
  group_by(date) %&gt;% 
  summarise(gdp = sum(gdp_pc),
            remitance = sum(remitances_adj)) %&gt;% 
  ggplot()+
  geom_line(mapping = aes(x = date, y = gdp, group = 1),
            color = &quot;dark orange&quot;)+
  scale_y_continuous(labels = scales::comma)+
  theme_graph()+
  labs(title = &quot;Per Capita GDP time series&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>gdp_pc %&gt;% 
  mutate(gdp_pc = value) %&gt;% 
  select(date, country, gdp_pc) %&gt;% 
  inner_join(remitances, by = c(&quot;date&quot; = &quot;date&quot;, &quot;country&quot; = &quot;country&quot;)) %&gt;%
  group_by(date) %&gt;% 
  summarise(gdp = sum(gdp_pc),
            remitance = sum(remitances_adj)) %&gt;% 
  ggplot()+
  geom_line(mapping = aes(x = date, y = remitance, group = 1),
            color = &quot;dark orange&quot;)+
  scale_y_continuous(labels = scales::comma)+
  theme_graph()+
  labs(title = &quot;Per Capita Remitances time series&quot;)</code></pre>
<p><img src="/posts/2020-01-20-imigration-data-analysis_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<p>When the data is agregated, the behavior is perceived. I won’t go deep in this topic because it would miss the point.</p>
</div>
<div id="conclusions" class="section level2">
<h2><strong>Conclusions</strong></h2>
<p>In this post I wanted analyze some data about immigration, share the main findings of the research made by the magazine and show how to request some data from World Bank using the <strong>wbstats</strong> package. I hope it was interesting for you.</p>
</div>

            </div>
        </article>

        <hr />

        <div class="post-info">

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>2536 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-01-19 21:00 -0300</p>
        </div>

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="/">Francisco Piccolo</a></span>
            
            <span></span>
            <span> <a href="/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
    
    
    
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                processEscapes: true,
                processEnvironments: true
            },
            // Center justify equations in code and markdown cells. Elsewhere
            // we use CSS to left justify single line equations in code cells.
            displayAlign: 'center',
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}},
                linebreaks: { automatic: true }
            }
        });
        </script>
        

</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.4a69500057d68129e88f497d354afe68422eb56de6d15e45dbe2190858ea5a76bfcb096406f992984b241db45f47388ac57ab0376e3b32125bef7a8a6d0f06c4.js" integrity="sha512-SmlQAFfWgSnoj0l9NUr&#43;aEIutW3m0V5F2&#43;IZCFjqWna/ywlkBvmSmEskHbRfRziKxXqwN247MhJb73qKbQ8GxA=="></script>



    </body>
</html>
